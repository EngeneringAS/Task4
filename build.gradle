apply plugin: 'java'
apply plugin: 'application'
apply plugin: 'eclipse'
//main class
mainClassName = "Ex3.AppAS"
/*----------------------------------initial Setup---------------------*/
repositories {
	mavenCentral()
}
//libraries
dependencies{
	compile files('lib/hamcrest-core-1.3.jar', 'lib/JavaAPIforKml-2.2.0.jar','lib/javacsv-2.0.jar', 'lib/jaxb-impl-2.2.6.jar','lib/mysql-connector-java-5.1.45-bin.jar')
	testCompile 'junit:junit:4.12'
}
/*-----------------------------------JAR------------------------------*/
//include dependencies jars
jar {
    manifest {
        attributes "Main-Class": mainClassName
    }
    from {
        configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }
    }
}
//creating fatjar
task customFatJar(type: Jar) {
    manifest {
        attributes 'Main-Class': mainClassName
    }
    baseName = project.name+'-all'	
    from { configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } }
    with jar
}
//version of wrapper
task wrapper(type: Wrapper) {
    gradleVersion = '4.4.1'
}
build.dependsOn(customFatJar)